<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.spring5legacy.KRK.mapper.ReplyMapper">

	<resultMap id="resultMap" type="com.spring5legacy.KRK.domain.ReplyVO">
		<result column="bno" property="bno"/>
		<result column="rno" property="rno"/>
		<result column="prno" property="prno"/>
		<result column="rcontent" property="rcontent"/>
		<result column="rwriter" property="rwriter"/>
		<result column="rdelFlag" property="rdelFlag"/>
		<result column="replyCnt" property="replyCnt"/>
	</resultMap>



	<!-- 댓글/답글 목록 조회 -->
	<select id="selectComment" resultMap="resultMap">
		SELECT rno , rcontent , rwriter , rregdate , rmoddate , bno , rdelflag , replyCnt
		FROM tbl_reply
		WHERE bno = #{bno} ;
	</select>



	<!-- 댓글등록 -->
	<insert id="insertComment" >
		INSERT INTO tbl_reply
		VALUES( #{rno}  , #{rcontent} , #{rwriter} , DEFAULT , DEFAULT , #{bno} , DEFAULT , #{rdelFlag}, #{replycnt});
	</insert>



    <!-- 답글등록 -->
	<insert id="insertReply" >
		INSERT INTO tbl_reply
		VALUES( #{rno} , #{rcontent} , #{rwriter} , DEFAULT , DEFAULT , #{bno} , #{prno} , #{rdelFlag} , #{replycnt});
	</insert>



</mapper>